@if(isAddingTask) {
  <app-new-task 
    [userId]="userId" 
    [task]="selectedTaskForEdit"
    (close)="onCloseAddTask()" />
}

<section id="tasks">
  <header>
    <h2>{{ name }}'s Tasks</h2>
    <div class="controls">
      <button class="add-btn" (click)="onStartAddTask()">Add Task</button>
      <select class="filter-select" [(ngModel)]="filter">
        <option value="all">All</option>
        <option value="pending">Pending</option>
        <option value="completed">Completed</option>
      </select>
    </div>
  </header>

  <p class="active-count">
    <strong>{{ (activeCount$ | async) }}</strong> active task{{ (activeCount$ | async) === 1 ? '' : 's' }} left
  </p>

  <ul>
    @for (task of filteredTasks$ | async; track task.id) {
      <li>
        <app-task [task]="task" (edit)="onEditTask($event)" />
      </li>
    }
  </ul>
</section>